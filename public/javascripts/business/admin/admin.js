/*! anamary_blog 2015-07-05;author: wangbinbin;nickname:done;blog: newblog.tecclass.cn;company:kaixun*/
$(document).ready(function(){init=function(){$(".admin_login").click(function(){var b=$(".admin_email").val(),c=$(".admin_password").val(),d="",e=!0,f=/^(?:\w+\.?)*\w+@(?:\w+\.?)*\w+$/;if((b.length<1||null==b||!f.test(b))&&(d+="邮箱太短或者为空或者错误<br>",e=!1),(c.length<1||null==c)&&(d+="密码太短或者为空",e=!1),e){d="登陆中。。。",$(".msg").show().html(d);var g={email:b,password:c};$.ajax({type:"POST",url:"/admin/login",data:g,dataType:"json",success:function(b){b.state?($(".msg").show().html(b.msg),a("/index",2e3)):$(".msg").show().html(b.msg)},error:function(a){console.log(a)}})}else $(".msg").show().html(d)}),$(".admin_register").click(function(){var b=$(".admin_email").val(),c=$(".admin_username").val(),d=$(".admin_password").val(),e="",f=!0,g=/^(?:\w+\.?)*\w+@(?:\w+\.?)*\w+$/;if((b.length<1||null==b||!g.test(b))&&(e+="邮箱太短或者为空或者错误<br>",f=!1),(c.length<1||null==c)&&(e+="用户名太短或者为空<br>",f=!1),(d.length<1||null==d)&&(e+="密码太短或者为空<br>",f=!1),f){e="注册中...",$(".msg").show().html(e);var h={email:b,username:c,password:d};$.ajax({type:"POST",url:"/admin/register",data:h,dataType:"json",success:function(b){b.state?($(".msg").show().html(b.msg),a("/admin/login",2e3)):$(".msg").show().html(b.msg)},error:function(a){}})}else $(".msg").show().html(e)})};var a=function(a,b){setTimeout(function(){window.location.href=a},b)};init()});