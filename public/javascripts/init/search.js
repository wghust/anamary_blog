/*! anamary_blog 2015-07-05;author: wangbinbin;nickname:done;blog: newblog.tecclass.cn;company:kaixun*/
$(document).ready(function(){function a(){0==e&&($(".closesearch").show(),$(".container").animate({left:"-100%"},500,function(){$(this).hide(),$(".searchpage").fadeIn()}),e=1),c()}function b(){1==e&&($(".container").show(),$(".searchpage").fadeOut(300),$(".w_search").val(""),$(".container").animate({left:"0%"},500,function(){e=0,$(".closesearch").hide()}))}function c(){var a=$(".w_search").val();$(".s_top_con").text(a);var b={sword:a};$.ajax({type:"POST",url:"/search",data:b,dataType:"json",success:function(a){var b="",c=0,d=a[0];0!=d.length&&(d.forEach(function(a,c){if(b+="<div class='s_block'><div class='s_title'><a href='/page/"+a.urltitle+"'>"+a.title+"</a><span class='s_time'>"+a.date+"</span></div><div class='s_tag'>",""!=a.tags){var d=a.tags.split(",");d.forEach(function(a,c){b+="<a href='/tags/"+a+"'>"+a+"</a>"})}b+="<div class='clear'></div></div><div class='s_con'>"+a.content+"</div></div>"}),c=1);var e=a[1];0!=e.length?e.forEach(function(a,c){b+="<div class='s_block'><div class='s_title'><span class='s_time'>"+a.date+"</span></div><a href='/mood/"+a.urltitle+"' class='s_con_a'><div class='s_con'>"+a.content+"</div></a></div>"}):0==c&&(b+="<div class='s_block'><div class='s_title'><a href='/index'>sorry，没有结果哦</a></div></div>"),b+="<div class='clear'></div>",$(".s_container").html(b)}})}var d=60;$(window).scroll(function(){var a=$(window).scrollTop();a>60?($(".header").addClass("get"),$(".w_search").addClass("getshow")):($(".header").removeClass("get"),$(".w_search").removeClass("getshow")),$(".header").css(a>d?{top:"-60px"}:{top:"0"}),setTimeout(function(){a>60&&(d=a)},500)});var e=0;$(".w_search").keydown(function(b){13==b.which&&a()}),$(".closesearch").click(function(a){return b(),!1}),$(window).keydown(function(a){1==e&&27==a.which&&b()})});